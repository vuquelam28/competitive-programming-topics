# Divisor - Editorial

This is not an easy problem: we need to apply the divide-and-conquer technique - splitting the set into $2$ parts, namely - combined with the branch and bound technique. Basically, we still proceed to split the set of prime numbers in half and generate all possible products of them, then combine the subsets of both sides to create divisors in the range $[A, B]$.

For the first task of generating all subsets of the initial set of prime numbers, we need three steps:
- ***Step 1:*** Create a `vector` $expo[i]$: the greatest exponentiation of the $i$-$th$ prime number that does not exceed $B$ (including $1$).
- ***Step 2:*** Split the set of prime numbers in half. Apply the technique of splitting the set into $2$ parts, generate all the subsets of those $2$ parts and store the products of the subsets into two sets $\text{left_set}$ and $\text{right_set}$. The technique here is that for every prime number $i,$ choose its exponentiations alternately: $p[i]^0, p[i]^1,...,p[i]^{max},$ which are already calculated by the `vector` $expo[i]$ in step $1.$
Another note is that although the number of subsets may be very large, the maximum value of the range $[A, B]$ is only $10^9.$ Thus, we apply the branch and bound technique in the generation process: if the current product already exceeds $B,$ there is no need to multiply the exponentiations of the following prime numbers.
- ***Step 3:*** Rearrange the two large sets $\text{left_set}$ and $\text{right_set}.$ Now, these two sets contain the products generated from the two parts.

The last task is to combine the values of the two sets. Corresponding to each product $mul$ in the set $\text{left_set},$ use binary searching to find the position range $[\text{pos_l, pos_r}]$ in the set $\text{right_set}$ such that the product of $mul$ and any product from $\text{pos_l}$ to $\text{pos_r}$ is not outside the range $[A,B].$ Then, the number of $n$'s divisors belonging to the range $[A,B]$ generated by $mul$ is: $(\text{pos_r} - \text{pos_l} + 1)$. We don't need to consider the products in each set: every set contains one value of $1,$ so it is possible to check whether the subsets of each set are $n$'s divisors that belong to the range $[A,B]$ or not. 